(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{Yz87:function(e,t,n){"use strict";n.r(t);var a=n("Ff2n"),r=(n("2qtc"),n("kLXV")),i=(n("/xke"),n("TeRw")),o=n("o0o1"),u=n.n(o),d=n("HaE+"),c=n("ODXe"),l=(n("5NDa"),n("5rEg")),s=n("q1tI"),f=n.n(s),h=n("Hx5s"),m=n("Qiat"),p=n("z7Ao"),I=n.n(p),x=n("t3Un");function g(e){return F.apply(this,arguments)}function F(){return F=Object(d["a"])(u.a.mark((function e(t){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(x["a"])("/v1/student/getStudentList",{params:t}));case 1:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function b(){return v.apply(this,arguments)}function v(){return v=Object(d["a"])(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(x["a"])("/v1/school/getSchoolList"));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return j=Object(d["a"])(u.a.mark((function e(t){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(x["a"])("/v1/student/deleteStudent",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}n("OaEy");var y=n("2fM7"),w=y["a"].Option,E=function(e){var t=Object(s["useState"])(""),n=Object(c["a"])(t,2),a=(n[0],n[1],e.schoolList),r=e.onChange;return f.a.createElement(y["a"],{style:{maxWidth:"100%"},placeholder:"\u8bf7\u9009\u62e9\u5b66\u6821",onChange:function(e){r(e)}},a.map((function(e){return f.a.createElement(w,{key:e.id},e.name)})))},R=y["a"].Option,T=function(e){var t=Object(s["useState"])(""),n=Object(c["a"])(t,2),a=(n[0],n[1],e.list),r=e.onChange;return f.a.createElement(y["a"],{style:{maxWidth:"100%"},placeholder:"\u8bf7\u9009\u62e9",onChange:function(e){r(e)}},a.map((function(e,t){return f.a.createElement(R,{key:t},e)})))},k=n("jhK/"),C=n("RCxd");l["a"].TextArea,t["default"]=function(){var e=Object(s["useState"])([]),t=Object(c["a"])(e,2),n=(t[0],t[1]),o=Object(s["useState"])([]),l=Object(c["a"])(o,2),p=l[0],x=l[1],F=Object(s["useRef"])(),v=function(){var e=Object(d["a"])(u.a.mark((function e(t){var a,r,i;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sid=t.school,delete t.school,e.next=4,b();case 4:return a=e.sent,x(a.data),e.next=8,g(t);case 8:return r=e.sent,i=j(r,a),n(i.data),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t){for(var n=0;n<e.data.length;n++){e.data[n].score=parseInt(e.data[n].score),e.data[n].feascore=parseInt(e.data[n].feascore),e.data[n].mathsocre=parseInt(e.data[n].mathsocre),e.data[n].foreignscore=parseInt(e.data[n].foreignscore);for(var a=0;a<t.data.length;a++)e.data[n].sid===t.data[a].id&&(e.data[n].school={},e.data[n].school.id=t.data[a].id,e.data[n].school.name=t.data[a].name)}return e.data,e},y=function(){var e=Object(d["a"])(u.a.mark((function e(t){var n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=function(){var e=Object(d["a"])(u.a.mark((function e(t){var n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O({stId:t});case 2:n=e.sent,0===n.code&&(i["a"].success({message:"\u5220\u9664\u6210\u529f"}),F.current&&F.current.reload());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664?",icon:f.a.createElement(C["a"],null),okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){n(t)},onCancel:function(){}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t,n){var a="";return p.forEach((function(r){t.school.id!==r.id||r.data.forEach((function(r){if(t.year===r.year)return"profession"===n?void(a=r[n][e].name):void(a=r[n][e])}))})),a},R=function(e,t){var n=e.getFieldValue("school"),a=e.getFieldValue("year"),r=[];return p.forEach((function(e){n===e.id&&e.data.forEach((function(e){a===e.year&&(r=e[t])}))})),f.a.createElement(T,{list:r,onChange:function(t){e.setFieldsValue({param:t})}})},S=[{title:"\u7f16\u53f7",dataIndex:"key",hideInForm:!0,hideInTable:!0,hideInSearch:!0},{title:"originalId",dataIndex:"originalId",hideInForm:!0},{title:"\u5b66\u6821",dataIndex:"school",valueType:"text",renderText:function(e,t){t.value,t.onChange;return e.name},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return f.a.createElement(E,{schoolList:p,onChange:function(e){n.setFieldsValue({school:e})}})},rules:[{required:!0,message:"\u89c4\u5219\u540d\u79f0\u4e3a\u5fc5\u586b\u9879"}]},{title:"\u5e74\u4efd",dataIndex:"year",valueType:"digit",rules:[{required:!0,message:"\u89c4\u5219\u540d\u79f0\u4e3a\u5fc5\u586b\u9879"}]},{title:"\u79d1\u7c7b",dataIndex:"branch",hideInForm:!0,renderText:function(e,t){return w(e,t,"branch")},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return R(n,"branch")}},{title:"\u6027\u522b",dataIndex:"gender",hideInForm:!0,renderText:function(e,t){return 1===e?"\u7537":"\u5973"},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return f.a.createElement(T,{list:["\u7537","\u5973"],onChange:function(e){n.setFieldsValue({param:e})}})}},{title:"\u7701\u4efd",dataIndex:"province",hideInForm:!0,renderText:function(e,t){return k["a"][e].name},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);var r=[];return k["a"].forEach((function(e){r.push(e.name)})),f.a.createElement(T,{list:r,onChange:function(e){n.setFieldsValue({param:e})}})}},{title:"\u8ba1\u5212\u79cd\u7c7b",dataIndex:"plan",hideInForm:!0,renderText:function(e,t){return w(e,t,"plan")},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return R(n,"plan")}},{title:"\u5916\u8bed\u8bed\u79cd",dataIndex:"language",hideInForm:!0,renderText:function(e,t){return w(e,t,"language")},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return R(n,"language")}},{title:"\u653f\u6cbb\u9762\u8c8c",dataIndex:"political",hideInForm:!0,renderText:function(e,t){return w(e,t,"political")},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return R(n,"political")}},{title:"\u7279\u957f",dataIndex:"feature",hideInForm:!0,renderText:function(e,t){return w(e,t,"feature")},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return R(n,"feature")}},{title:"\u4e13\u4e1a",dataIndex:"profession",hideInForm:!0,renderText:function(e,t){return w(e,t,"profession")},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);var r=n.getFieldValue("school"),i=n.getFieldValue("year"),o=[];p.forEach((function(e){r===e.id&&e.data.forEach((function(e){i===e.year&&(o=e["profession"])}))}));var u=[];return o.forEach((function(e){u.push(e.name)})),f.a.createElement(T,{list:u,onChange:function(e){n.setFieldsValue({param:e})}})}},{title:"\u662f\u5426\u62a5\u9053",dataIndex:"flag",hideInForm:!0,renderText:function(e,t){return e?"\u662f":"\u5426"},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return f.a.createElement(T,{list:["\u662f","\u5426"],onChange:function(e){n.setFieldsValue({param:e})}})}},{title:"\u662f\u5426\u8fc7\u91cd\u70b9\u7ebf",dataIndex:"line",hideInForm:!0,renderText:function(e,t){return e?"\u662f":"\u5426"},renderFormItem:function(e,t,n){t.defaultRender,Object(a["a"])(t,["defaultRender"]);return f.a.createElement(T,{list:["\u662f","\u5426"],onChange:function(e){n.setFieldsValue({param:e})}})}},{title:"\u4e13\u4e1a\u5fd7\u613f\u53f7",dataIndex:"provolunteer",hideInForm:!0},{title:"\u9ad8\u8003\u6210\u7ee9",dataIndex:"score",hideInForm:!0,hideInSearch:!0},{title:"\u7279\u5f81\u6210\u7ee9",dataIndex:"feascore",hideInForm:!0,hideInSearch:!0},{title:"\u6570\u5b66\u6210\u7ee9",dataIndex:"mathsocre",hideInForm:!0,hideInSearch:!0},{title:"\u5916\u8bed\u6210\u7ee9",dataIndex:"foreignscore",hideInForm:!0,hideInSearch:!0},{title:"\u5bfc\u5165\u7f16\u53f7",dataIndex:"taskFile",hideInForm:!0},{title:"\u5bfc\u5165\u65f6\u95f4",dataIndex:"id",valueType:"dateTime",hideInForm:!0,hideInSearch:!0,renderText:function(e,t){t.value,t.onChange;return I()(e)}},{title:"\u64cd\u4f5c",dataIndex:"option",valueType:"option",render:function(e,t){return f.a.createElement(f.a.Fragment,null,f.a.createElement("a",{onClick:function(){y(t.id)}},"\u5220\u9664"))}}];return f.a.createElement(h["b"],{title:!1},f.a.createElement(m["a"],{actionRef:F,columns:S,request:function(e){return v(e)},rowKey:"key",pagination:{showSizeChanger:!0},scroll:{x:120*S.length},dateFormatter:"string",headerTitle:""}))}}}]);